import{u as A}from"./vue-router-3d96c2fa.js";import{h as f}from"./index-d60ffb08.js";import{b as z,a as D,c as J}from"./tool-e1301be4.js";import{q as K}from"./index-71333aae.js";import{d as S}from"./LoadingOutlined-377d3aaa.js";import{r as o,n as Q,e as p}from"./runtime-core.esm-bundler-e1893df6.js";import{M as w}from"./Modal-569c71cb.js";function _(u){const M=A(),{t:b}=K(),C=o(""),h=o(!1),l=o(1),n=o(15),d=o(0),c=o(!0),i=o(!0),g=o([]),E=o([]),O=o(),T=Q(()=>({total:d.value,current:l.value,pageSize:n.value,showTotal:e=>b("page.total")+` ${e} `+b("page.unit"),showSizeChanger:!0,showQuickJumper:!0,hideOnSinglePage:!0,onChange:(e,t)=>{l.value=e,n.value=t,r()}})),F=e=>{l.value=e.current||l.value,n.value=e.pageSize||n.value,r()},L=(e,t)=>{e.length===1?c.value=!1:c.value=!0,e.length>=1?i.value=!1:i.value=!0,g.value=e,E.value=t},N=()=>{l.value=1,R(),r()},R=()=>{var e;(e=O.value)==null||e.resetForm()},P=(e,t,s)=>{let a=null;z(t)&&(a={id:t}),D(t)&&(a={...t}),M.push({name:e,params:a,query:{...s}})},k=(e,t)=>{w.confirm({title:"提示",icon:p(S),content:"确认启用所选择的数据?",onOk(){f.post(e,t,{loading:!0,showSuccess:!0,showError:!0}).then(()=>{r()})}})},q=(e,t)=>{w.confirm({title:"提示",icon:p(S),content:"确认禁用所选择的数据?",onOk(){f.post(e,t,{loading:!0,showSuccess:!0,showError:!0}).then(()=>{r()})}})};async function x(e,t,s){let a={};z(t)&&(a={id:t}),D(t)&&(a={...t}),s==="direct"?y(e,a):w.confirm({title:"确定删除所选择的数据?",icon:p(S),onOk(){y(e,a)}})}async function y(e,t){await f.post(e,t,{loading:!0,showSuccess:!0,showError:!0}),l.value>1&&(l.value=(d.value-1)/n.value<=l.value-1?l.value-1:l.value),r()}async function I(e,t){e&&(C.value=e);const s=e||C.value;h.value=!0;let a={pageNo:l.value-1,pageSize:n.value};u&&u.searchState&&(a={...a,...J(u.searchState)});const j={showError:!0,...t};return f.post(s,a,j).finally(()=>{h.value=!1,g.value=[],E.value=[],i.value=!0,c.value=!0})}function r(){u!=null&&u.getList&&u.getList()}const v=o(!1),m=o("");return{closeModal:()=>{v.value=!1,u&&(u.dataInfo.value=void 0),r()},disabledMultiple:i,disabledSingle:c,fetchData:I,onEnable:k,onDisable:q,onCreate:e=>{m.value=e,v.value=!0},onDelete:x,onUpdate:(e,t)=>{u&&(u.dataInfo.value=t),m.value=e,v.value=!0},onReload:N,onReset:R,onRouter:P,onTableChange:F,loading:h,modalTitle:m,onSelectChange:L,pagination:T,pageSize:n,searchFormRef:O,selectedRowKeys:g,total:d,visible:v}}export{_ as u};
