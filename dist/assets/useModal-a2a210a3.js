import{r as m,s as h}from"./tool-e1301be4.js";import{h as v}from"./index-d60ffb08.js";import{r as n,f as w,w as d,j as p}from"./runtime-core.esm-bundler-e1893df6.js";function R(e){const c=n(!1),r=n(),a=w({...e.initialState});d(()=>e.props.visible,t=>{c.value=t,t&&e.props.uniqueKey&&(h(a,e.initialState,e.props.dataInfo),e.watchFn&&e.watchFn())});const u=t=>{var l;(l=r.value)==null||l.validate().then(async()=>{await v.post(t,a,{loading:!0,showSuccess:!0,showError:!0}),o()}).catch(f=>{console.log("error",f)})},s=p(),i=s==null?void 0:s.emit,o=()=>{var t;(t=r.value)==null||t.resetFields(),m(a,e.initialState),i&&i("close")};return{emitClose:o,formRef:r,formState:a,onOk:u,visible:c}}export{R as u};
