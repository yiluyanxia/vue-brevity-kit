import{f as j}from"./date-45198c36.js";import{f as M,e as d,h as q,j as I}from"./tool-e1301be4.js";import{S as J,T as G}from"./SearchForm-850e1176.js";import{u as H}from"./useList-83c3fd25.js";import{d as Q,r as W,f as X,g as Y,ab as m,e as i,a as s,F as u,b as c,o as l,u as t,x as r,af as p,ah as k,c as Z}from"./runtime-core.esm-bundler-e1893df6.js";import{b as tt}from"./LoadingOutlined-377d3aaa.js";import"./dayjs.min-8f56631c.js";import"./_commonjsHelpers-48992372.js";import"./UpOutlined-c02615f6.js";import"./AntdIcon-ea494017.js";import"./ReloadOutlined-8f39c8a7.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./vue-router-3d96c2fa.js";import"./index-d60ffb08.js";import"./axios-641c6ca9.js";import"./index-71333aae.js";import"./useConfigInject-985b36a0.js";import"./extends-34e645d9.js";import"./runtime-dom.esm-bundler-d15a3063.js";import"./CloseCircleFilled-f172dba6.js";import"./key-3b961902.js";import"./inherits-1b1b5999.js";import"./variablesCSS-e22db411.js";import"./setting-b9ced7ae.js";import"./index-2193c281.js";import"./StarOutlined-4c117a0a.js";import"./SyncOutlined-15adee8e.js";import"./ClearOutlined-61968c2b.js";import"./RotateRightOutlined-80c84fe8.js";import"./SaveOutlined-0f0d91c1.js";import"./UserOutlined-cf9a456f.js";import"./MinusCircleFilled-e71cdf93.js";import"./SignalFilled-a7fff856.js";import"./layout-ad4859fc.js";import"./lock-31147f4a.js";import"./Modal-569c71cb.js";const et={key:0},Bt=Q({__name:"Index",setup(at){const b=W([]),_=X({name:"",pid:"",userName:"",status:null,updatedAt:null,startTime:null,endTime:null}),{disabledMultiple:S,disabledSingle:h,fetchData:C,onEnable:w,onDisable:v,onDelete:R,onReload:D,onRouter:f,loading:E,onSelectChange:A,pagination:L,searchFormRef:N,selectedRowKeys:y,total:x}=H({searchState:_,dataSource:b,getList:T}),U=M("SERVER_STATUS"),F=[{key:"name",label:"名称"},{key:"pid",label:"PID",tip:"进程标识"},{key:"userName",label:"用户名"},{key:"status",label:"状态",options:U},{key:"updatedAt",label:"更新时间",date:!0},{key:"startTime",key1:"endTime",label:"时间范围",range:!0}],V=[{title:"名称",dataIndex:"name",width:160},{title:"PID",dataIndex:"pid",width:100},{title:"用户名",dataIndex:"userName",width:160},{title:"CPU",dataIndex:"cpu",width:160},{title:"内存",dataIndex:"memory",width:160},{title:"更新时间",dataIndex:"updatedAt",width:160},{title:"状态",dataIndex:"status",width:100},{title:"描述",dataIndex:"description",width:160},{title:"操作",key:"action",width:120}];function $(){for(let a=1;a<=10;a++)b.value.push({id:a.toString(),name:"Task "+a,pid:d(99999),cpu:d(100),memory:d(1e5),userName:"User "+d(10),description:"Description "+d(999999),status:d(5),updatedAt:new Date,editable:!1});x.value=50}async function T(){const a=await C("retrieveList");b.value=a.content,x.value=a.totalElements}return Y(async()=>{$()}),(a,o)=>{const O=c("a-tooltip"),B=c("a-badge"),g=c("a-button"),P=c("a-table"),z=c("a-card");return l(),m(u,null,[i(J,{ref_key:"searchFormRef",ref:N,searchState:_,schemas:F,onOnFinish:T},null,8,["searchState"]),i(z,{bordered:!1,class:"brevity-table-card"},{default:s(()=>[i(G,{onCreate:o[0]||(o[0]=e=>t(f)("TableListCreate")),onReload:t(D),onDelete:o[1]||(o[1]=e=>t(R)("deleteList",{ids:t(y)})),onEnable:o[2]||(o[2]=e=>t(w)("updateToEnabled",{ids:t(y)[0]})),onDisable:o[3]||(o[3]=e=>t(v)("updateToDisable",{IDBObjectStore:t(y)[0]})),enable:t(h),multiple:t(S)},null,8,["onReload","enable","multiple"]),i(P,{"row-selection":{selectedRowKeys:t(y),onChange:t(A)},rowKey:"id",class:"brevity-table-box",sticky:"",columns:V,"data-source":b.value,scroll:{x:"100%"},pagination:t(L),loading:t(E)},{headerCell:s(({column:e})=>[e.dataIndex==="pid"?(l(),m("span",et,[r(" PID "),i(O,null,{title:s(()=>[r("进程标识")]),default:s(()=>[i(t(tt))]),_:1})])):p("",!0)]),bodyCell:s(({column:e,record:n})=>[e.dataIndex==="cpu"?(l(),m(u,{key:0},[r(k(n.cpu+"%"),1)],64)):p("",!0),e.dataIndex==="memory"?(l(),m(u,{key:1},[r(k(t(q)(n.memory)),1)],64)):p("",!0),e.dataIndex==="updatedAt"?(l(),m(u,{key:2},[r(k(t(j)(n.updatedAt)),1)],64)):p("",!0),e.dataIndex==="status"?(l(),Z(B,{key:3,status:t(I)("SERVER_STATUS",n.status,"color"),text:t(I)("SERVER_STATUS",n.status)},null,8,["status","text"])):p("",!0),e.key==="action"?(l(),m(u,{key:4},[i(g,{type:"link",size:"small",onClick:K=>t(f)("TableListDetail",n.id)},{default:s(()=>[r("详情")]),_:2},1032,["onClick"]),i(g,{type:"link",size:"small",onClick:K=>t(f)("TableListUpdate",n.id,{query:encodeURIComponent(JSON.stringify(n))})},{default:s(()=>[r(" 编辑 ")]),_:2},1032,["onClick"])],64)):p("",!0)]),_:1},8,["row-selection","data-source","pagination","loading"])]),_:1})],64)}}});export{Bt as default};
